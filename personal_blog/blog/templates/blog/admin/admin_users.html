{% extends 'blog/base_admin.html' %}
{% load static %}
{% block title %}Users | Admin Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="fw-semibold">Manage Users</h2>
  <a href="{% url 'add_user' %}" class="add-btn">
    <i class="bi bi-person-plus"></i> Add New User
  </a>
</div>

<div class="table-container">
  <table class="table align-middle table-hover">
    <thead class="table-light">
      <tr>
        <th>Avatar</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Status</th>
        <th class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td><img src="{% static 'images/default-avatar.jpg' %}" class="user-avatar"></td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>
          {% if user.profile.role == 'admin' %}
            <span class="badge bg-primary">Admin</span>
          {% elif user.profile.role == 'editor' %}
            <span class="badge bg-secondary">Editor</span>
          {% else %}
            <span class="badge bg-light text-dark">Viewer</span>
          {% endif %}
        </td>
        <td>
          <span class="badge {% if user.is_active %}bg-success{% else %}bg-danger{% endif %}">
            {{ user.is_active|yesno:"Active,Suspended" }}
          </span>
        </td>
        <td class="text-center">
          <a href="{% url 'view_user' user.id %}" class="btn btn-outline-info btn-sm"><i class="bi bi-eye"></i></a>
          <a href="{% url 'edit_user' user.id %}" class="btn btn-outline-warning btn-sm"><i class="bi bi-pencil-square"></i></a>
          <a href="{% url 'delete_user' user.id %}" class="btn btn-outline-danger btn-sm"
             onclick="return confirm('Are you sure you want to delete this user?')">
             <i class="bi bi-trash"></i></a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted">No users found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block extra_css %}
<style>
.table-container {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}
.user-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
}
.add-btn {
  background: linear-gradient(90deg, #007bff, #00c6ff);
  border: none;
  color: white;
  border-radius: 30px;
  padding: 10px 20px;
  font-weight: 500;
  transition: 0.3s;
}
.add-btn:hover {
  opacity: 0.9;
  transform: translateY(-2px);
}
</style>
{% endblock %}
